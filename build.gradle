plugins {
    id 'com.ewerk.gradle.plugins.jaxb2' version '1.0.0'
}

dependencies {
    compile project(':ringingmaster-persist')
    compile project(':ringingmaster-engine')

    runtime 'org.apache.logging.log4j:log4j-core:2.4.1'
    runtime 'org.apache.logging.log4j:log4j-api:2.4.1'
    runtime 'org.apache.logging.log4j:log4j-slf4j-impl:2.4.1'
}

jaxb2 {
    xjc {
        'cc-methods-classes' {
            basePackage = 'com.cccbr.generated.method'
            schema = 'src/main/resources/centralCouncil/methods.xsd'
        }
    }
}

sourceSets {
    main {
        java {
            srcDir 'src/generated'
        }
    }
}



task generateMethodLibrary (group: 'ringingmaster', dependsOn: ['classes','jaxb2Classes'], type: JavaExec) {
    main = 'com.ringingmaster.extraction.NotationLibraryBuilder'
    classpath = sourceSets.main.runtimeClasspath
    args '/centralCouncil/allmeths.xml', project.getBuildDir().toString() + '/notationlibrary.xml'
}

defaultTasks 'methodLibrary'